

-- Table: tachograph.driver

-- DROP TABLE IF EXISTS tachograph.driver;

CREATE TABLE IF NOT EXISTS tachograph.driver
(
    "Id" bigint NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    name character varying(20) COLLATE pg_catalog."default",
    CONSTRAINT "Driver_pkey" PRIMARY KEY ("Id")
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS tachograph.driver
    OWNER to postgres;

-- Table: tachograph.driverdetail

-- DROP TABLE IF EXISTS tachograph.driverdetail;

CREATE TABLE IF NOT EXISTS tachograph.driverdetail
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    first_name character varying(50) COLLATE pg_catalog."default" NOT NULL,
    last_name character varying(50) COLLATE pg_catalog."default" NOT NULL,
    address text COLLATE pg_catalog."default",
    mobile_number character varying(15) COLLATE pg_catalog."default" NOT NULL,
    nationality character varying(50) COLLATE pg_catalog."default",
    license_number character varying(20) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT driverdetail_pkey PRIMARY KEY (id),
    CONSTRAINT driverdetail_license_number_key UNIQUE (license_number),
    CONSTRAINT driverdetail_id_fkey FOREIGN KEY (id)
        REFERENCES tachograph.driver ("Id") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS tachograph.driverdetail
    OWNER to postgres;

-- Table: tachograph.user

-- DROP TABLE IF EXISTS tachograph."user";

CREATE TABLE IF NOT EXISTS tachograph."user"
(
    "Id" bigint NOT NULL DEFAULT nextval('tachograph.user_id_seq'::regclass),
    "Name" text COLLATE pg_catalog."default" NOT NULL,
    "Password" text COLLATE pg_catalog."default" NOT NULL,
    "Role" text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT user_pkey PRIMARY KEY ("Id")
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS tachograph."user"
    OWNER to postgres;


-- Table: tachograph.activity

-- DROP TABLE IF EXISTS tachograph.activity;

CREATE TABLE IF NOT EXISTS tachograph.activity
(
    "Id" bigint NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 2 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    "Start" time without time zone NOT NULL,
    "End" time without time zone NOT NULL,
    "Date" date NOT NULL,
    "Type" character(10) COLLATE pg_catalog."default" NOT NULL,
    "DriverId" bigint NOT NULL,
    CONSTRAINT pk_activity PRIMARY KEY ("Id")
        INCLUDE("Id"),
    CONSTRAINT fk_activity_driver FOREIGN KEY ("DriverId")
        REFERENCES tachograph.driver ("Id") MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS tachograph.activity
    OWNER to postgres;
